<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.semi.dao.feedbackDAO">

	<select id="selectMaxFeedbackNum" resultType="integer">
		<![CDATA[
		select max(feedback_num) from feedback
		]]>
	</select>

	<select id="selectFeedbackCount" resultType="int">
		<![CDATA[
		select count(*) from feedback
		]]>
	</select>

	<insert id="insertFeedback" parameterType="Feedback">
		<![CDATA[
			insert into feedback
			(feedback_num, feedback_nickname, feeback_subject, feedback_content, feedback_replay_fileName, feedback_video_fileName,
			feedback_date, feedback_readcount, feedback_likecount, feedback_vote_member, feedback_vote_top, feedback_vote_jungle, feedback_vote_mid,
			feedback_vote_ad, feedback_vote_support)
			values (#{feedback_num}, #{feedback_nickname}, #{feeback_subject}, #{feedback_content}, #{feedback_replay_fileName}, #{feedback_video_fileName},
			#{feedback_date}, #{feedback_readcount}, #{feedback_likecount}, #{feedback_vote_member}, #{feedback_vote_top}, #{feedback_vote_jungle}, #{feedback_vote_mid}, 
			#{feedback_vote_ad}, #{feedback_vote_support})
			]]>
	</insert>

	<select id="selectFeedback" resultType="int">
	 	<![CDATA[
 			select count(*) from feedback
 		]]>
	</select>

	<select id="selectFeedbackList" resultType="Feedback"
		parameterType="int">
		<![CDATA[
		select *
		from (select @rownum:=@rownum+1 rnum, tot.*
			  from (select * from feedback order by feedback_date asc) tot,
				  (select @rownum:=0) temp) sub
		where rnum between #{startrow} and #{startrow}+9
 		]]>
	</select>

	<update id="updateFeedback" parameterType="Feedback">
			<![CDATA[
 			update Feedback set Feedback_subject=#{Feedback_subject}, Feedback_content=#{Feedback_content}
 			where Feedback_num=#{Feedback_num}
 		]]>
	</update>

	<delete id="deleteFeedback" parameterType="int">
 		<![CDATA[
 			delete from Feedback where Feedback_num=#{Feedback_Num}
 		]]>
	</delete>

	<update id="updateDeletedFeedback" parameterType="Feedback">
 		<![CDATA[
 			update Feedback set Feedback_subject=#{Feedback_subject}, Feedback_view=#{Feedback_view}
 			where Feedback_num=#{Feedback_num}
 		]]>
	</update>

</mapper>
